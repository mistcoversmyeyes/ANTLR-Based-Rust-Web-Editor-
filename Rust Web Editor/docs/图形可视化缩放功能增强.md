# 图形可视化缩放功能增强说明

## 改进内容

### 1. 扩展缩放范围
- **之前**: 缩放范围限制在 0.1x - 5x
- **现在**: 缩放范围扩展到 0.01x - 50x，支持查看超大型 AST

### 2. 改进的缩放体验
- **以鼠标为中心缩放**: 滚轮缩放时以鼠标位置为中心，更直观
- **更精细的缩放步长**: 滚轮缩放步长调整为 85% 和 118%，更平滑
- **缩放指示器**: 实时显示当前缩放比例，2秒后自动消失

### 3. 增强的拖拽功能
- **改进的平移**: 支持在任意缩放级别下的平移操作
- **变换状态保存**: 记录每个容器的缩放和平移状态
- **防止文本选择**: 避免拖拽时误选文本

### 4. 新增快捷键支持
- **+/=**: 放大
- **-**: 缩小  
- **Ctrl+0**: 重置到 100% 缩放
- **Ctrl+F**: 适应窗口大小
- **双击**: 适应窗口大小

### 5. 新增控制按钮
- **适应窗口**: 自动调整图形大小以适应容器
- **重置缩放**: 重置到 100% 缩放并居中
- **快捷键提示**: 鼠标悬停时显示操作提示

### 6. 样式改进
- **缩放指示器**: 美观的半透明指示器显示当前缩放比例
- **快捷键提示**: 容器底部显示操作说明
- **改进的交互反馈**: 更好的鼠标光标状态

## 使用方法

### 基本操作
1. **查看大型 AST**: 使用滚轮放大到足够大的倍数（最大 50x）
2. **快速导航**: 放大后使用拖拽移动到感兴趣的部分
3. **适应窗口**: 点击"适应窗口"按钮或按 Ctrl+F 自动调整大小
4. **重置视图**: 点击"重置缩放"按钮或按 Ctrl+0 回到默认状态

### 高级操作
1. **精确缩放**: 使用 +/- 键进行精确的缩放控制
2. **以特定点为中心缩放**: 将鼠标移动到目标位置，然后滚轮缩放
3. **双击快速适应**: 双击图形快速适应窗口大小

### 调试功能
控制台中提供了调试函数：
- `debugViz.testZoom('astViz', 20)`: 测试设置指定倍数的缩放
- `debugViz.testFit('astViz')`: 测试适应容器功能
- `debugViz.showZoomStatus()`: 显示当前所有容器的缩放状态

## 技术实现

### 核心改进
1. **变换矩阵管理**: 统一管理平移和缩放变换
2. **状态持久化**: 保存每个容器的变换状态
3. **事件处理优化**: 改进的鼠标和键盘事件处理
4. **性能优化**: 减少不必要的DOM操作

### 兼容性
- 支持所有现代浏览器
- 保持与现有代码的完全兼容性
- 不影响现有的导出和其他功能

这些改进让用户能够更轻松地浏览和分析复杂的 AST 和 CST 结构，特别是对于大型代码文件生成的超大图形。
