# 后续开发计划

## 第一阶段：完善核心前端功能 (Web编辑器)

这个阶段的目标是完成 `README.md` 中要求的基础功能，将项目从一个本地分析器转变为一个功能完备的网页编辑器。

1.  **搭建Web服务器**:
    *   **任务**: 在 `RustAnalyser` 项目中集成一个轻量级的Java Web服务器（Javalin）。
    *   **目的**: 创建一个API端点（例如 `/analyse`），使其能够接收来自网页前端的Rust代码字符串。

2.  **创建Web编辑器前端**:
    *   **任务**: 创建一个新的 `webapp` 或 `frontend` 目录，在其中编写 HTML, CSS, 和 JavaScript 代码。
    *   **目的**: 构建一个用户界面，包含一个代码输入框（可以使用 CodeMirror 或 Monaco Editor 增强体验）和一个“分析”按钮。当用户点击按钮时，通过 `fetch` API 将代码发送到后端的 `/analyse` 端点。

3.  **实现结果的可视化**:
    *   **TokenStream**: 修改后端逻辑，使其返回一个包含所有Token的列表（JSON格式），并在前端以文本形式展示。
    *   **ParseTree/AST (使用Graphviz)**:
        *   后端：编写一个访问者（Visitor）或监听器（Listener）来遍历ANTLR生成的解析树，并生成符合Graphviz要求的 `.dot` 文件格式的字符串。
        *   前端：接收到 `.dot` 字符串后，使用 `viz.js` (Graphviz的JavaScript移植版) 在浏览器中直接渲染出图形。

4.  **构建完整的错误处理机制**:
    *   **任务**: 实现ANTLR的 `ANTLRErrorListener` 接口。
    *   **目的**: 捕获词法/语法分析过程中产生的错误，收集错误信息（如行号、列号、错误消息），并将其以清晰的格式（如JSON）返回给前端，在编辑器中高亮显示或在单独的面板中列出。

## 第二阶段：语义分析与LLVM IR生成 (选做加分项)

这个阶段的目标是实现编译器的核心后端功能。

1.  **定义语义规则与构建符号表**:
    *   **任务**: 设计并实现一个符号表（Symbol Table）数据结构，用于存储变量、函数、类型等信息。
    *   **目的**: 在遍历AST时，根据Rust的语义规则（如作用域、类型检查）填充符号表。

2.  **遍历AST并生成LLVM IR**:
    *   **任务**: 再次遍历AST，利用符号表中的信息，生成LLVM中间表示（LLVM IR）。
    *   **目的**: 将高级的Rust代码转换为低级的、与机器无关的中间代码。可以考虑使用 LLVM的Java绑定库。

## 第三阶段：集成LLVM后端 (选做加分项)

1.  **调用LLVM后端**:
    *   **任务**: 将生成的LLVM IR输入到LLVM的后端工具链（如 `llc` 和 `clang`）。
    *   **目的**: 编译生成特定平台（如 x86, ARM）的可执行文件。
